<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Physics Sandbox</title>
<style>
body {
  margin: 0;
  background: #0a0a0a;
  overflow: hidden;
  font-family: Arial, sans-serif;
  cursor: none;
}
canvas { display: block; }

#toolbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 70px;
  background: rgba(20,20,20,0.95);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px;
  overflow-x: auto;
  border-bottom: 1px solid #333;
}

.tool {
  min-width: 90px;
  padding: 8px;
  background: #1e1e1e;
  color: white;
  border: 1px solid #333;
  text-align: center;
  cursor: pointer;
  user-select: none;
}
.tool.active {
  background: #4fc3f7;
  color: black;
}
#clear { background:#b71c1c; }

#cursor {
  position: fixed;
  width: 14px;
  height: 14px;
  pointer-events: none;
  image-rendering: pixelated;
}
#cursor::before {
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(#fff 0 0),
    linear-gradient(#fff 0 0);
  background-size:100% 2px,2px 100%;
  background-position:center;
  background-repeat:no-repeat;
}
</style>
</head>
<body>

<div id="toolbar">
  <div class="tool active" data-tool="ball">Ball</div>
  <div class="tool" data-tool="box">Box</div>
  <div class="tool" data-tool="sand">Sand</div>
  <div class="tool" data-tool="water">Water</div>
  <div class="tool" data-tool="lava">Lava</div>
  <div class="tool" data-tool="brick">Brick</div>
  <div class="tool" data-tool="bomb">Bomb</div>
  <div class="tool" data-tool="eraser">Eraser</div>

  <div class="tool" data-tool="fire">Fire</div>
  <div class="tool" data-tool="smoke">Smoke</div>
  <div class="tool" data-tool="ice">Ice</div>
  <div class="tool" data-tool="metal">Metal</div>
  <div class="tool" data-tool="glass">Glass</div>
  <div class="tool" data-tool="acid">Acid</div>
  <div class="tool" data-tool="spawner">Spawner</div>
  <div class="tool" data-tool="gravity">Gravity</div>
  <div class="tool" data-tool="torch">Torch</div>

  <div class="tool" id="clear">Clear</div>
</div>

<canvas id="canvas"></canvas>
<div id="cursor"></div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const cursor = document.getElementById("cursor");

canvas.width = innerWidth;
canvas.height = innerHeight;

window.addEventListener("resize",()=>{
  canvas.width = innerWidth;
  canvas.height = innerHeight;
});

let tool="ball", holding=false;
let gravityVal=0.4;
let objects=[], particles=[];

document.querySelectorAll(".tool").forEach(t=>{
  t.onclick=()=>{
    if(t.id==="clear"){objects=[];particles=[];return;}
    document.querySelectorAll(".tool").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    tool=t.dataset.tool;
  };
});

document.addEventListener("mousemove",e=>{
  cursor.style.left=e.clientX-7+"px";
  cursor.style.top=e.clientY-7+"px";
});

canvas.addEventListener("mousedown",()=>holding=true);
canvas.addEventListener("mouseup",()=>holding=false);

class ObjectEntity{
  constructor(x,y,w,h,type){
    this.x=x;this.y=y;this.w=w;this.h=h;
    this.vx=0;this.vy=0;
    this.type=type;
    this.dead=false;
  }
  update(){
    if(this.type!=="brick"){
      this.vy+=gravityVal;
      this.x+=this.vx;
      this.y+=this.vy;
    }
    if(this.y+this.h>canvas.height){
      this.y=canvas.height-this.h;
      this.vy*=-0.6;
    }
    if(this.x<0||this.x+this.w>canvas.width) this.vx*=-0.6;
  }
  draw(){
    ctx.fillStyle={
      ball:"#4fc3f7",
      box:"#81c784",
      brick:"#8d6e63",
      metal:"#9e9e9e",
      glass:"rgba(180,220,255,0.6)"
    }[this.type]||"#fff";
    ctx.fillRect(this.x,this.y,this.w,this.h);
  }
}

class Particle{
  constructor(x,y,type){
    this.x=x;this.y=y;
    this.vx=(Math.random()-0.5);
    this.vy=Math.random();
    this.type=type;
    this.life=200;
  }
  update(){
    if(this.type==="sand"){this.vy+=0.3;this.x+=this.vx;this.y+=this.vy;}
    if(this.type==="water"){this.vy+=0.1;this.x+=(Math.random()-0.5)*2;this.y+=this.vy;}
    if(this.type==="lava"){
      this.vy+=0.2;this.y+=this.vy;
      objects.forEach(o=>{
        if(this.x>o.x&&this.x<o.x+o.w&&this.y>o.y&&this.y<o.y+o.h) o.dead=true;
      });
    }
    if(this.type==="fire"){this.vy-=0.05;this.life--;}
    if(this.type==="smoke"){this.vy-=0.1;this.life--;}
    if(this.type==="acid"){
      this.vy+=0.2;
      objects.forEach(o=>{
        if(o.type!=="metal"&&this.x>o.x&&this.x<o.x+o.w&&this.y>o.y&&this.y<o.y+o.h){
          o.dead=true;this.life--;
        }
      });
    }
    if(this.type==="ice"){this.vy+=0.1;}
    this.life--;
  }
  draw(){
    ctx.fillStyle={
      sand:"#fbc02d",
      water:"#2196f3",
      lava:"#ff5722",
      fire:"#ff9800",
      smoke:"#9e9e9e",
      acid:"#00ff6a",
      ice:"#b3e5fc"
    }[this.type];
    ctx.fillRect(this.x,this.y,2,2);
  }
}

canvas.addEventListener("mousemove",e=>{
  if(!holding)return;
  const x=e.clientX,y=e.clientY;

  if(tool==="ball")objects.push(new ObjectEntity(x,y,14,14,"ball"));
  if(tool==="box")objects.push(new ObjectEntity(x,y,20,20,"box"));
  if(tool==="brick")objects.push(new ObjectEntity(x,y,20,10,"brick"));
  if(tool==="metal")objects.push(new ObjectEntity(x,y,22,22,"metal"));
  if(tool==="glass")objects.push(new ObjectEntity(x,y,20,20,"glass"));

  if(["sand","water","lava","fire","smoke","acid","ice"].includes(tool)){
    for(let i=0;i<6;i++)particles.push(new Particle(x,y,tool));
  }

  if(tool==="eraser"){
    objects=objects.filter(o=>Math.hypot(o.x-x,o.y-y)>30);
    particles=particles.filter(p=>Math.hypot(p.x-x,p.y-y)>30);
  }

  if(tool==="bomb"){
    for(let i=0;i<120;i++){
      let p=new Particle(x,y,"sand");
      p.vx=(Math.random()-0.5)*8;
      p.vy=(Math.random()-0.5)*8;
      particles.push(p);
    }
    objects.forEach(o=>{
      if(o.type==="glass"&&Math.hypot(o.x-x,o.y-y)<80)o.dead=true;
    });
  }

  if(tool==="spawner"){
    objects.push({x,y,tick:0,draw(){
      ctx.fillStyle="#ffeb3b";ctx.fillRect(this.x,this.y,14,14);
    },update(){
      this.tick++;if(this.tick%10===0)particles.push(new Particle(this.x,this.y,"sand"));
    }});
  }

  if(tool==="gravity"){
    objects.push({x,y,draw(){
      ctx.strokeStyle="#9c27b0";ctx.beginPath();ctx.arc(this.x,this.y,20,0,Math.PI*2);ctx.stroke();
    },update(){
      particles.forEach(p=>{
        let dx=this.x-p.x,dy=this.y-p.y,d=Math.hypot(dx,dy);
        if(d<100){p.vx+=dx/d*0.05;p.vy+=dy/d*0.05;}
      });
    }});
  }

  if(tool==="torch"){
    objects.push({x,y,draw(){
      ctx.fillStyle="#ff9800";ctx.fillRect(this.x,this.y,8,16);
    },update(){
      particles.push(new Particle(this.x,this.y,"fire"));
      particles.push(new Particle(this.x,this.y,"smoke"));
    }});
  }
});

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  objects.forEach(o=>o.update());
  particles.forEach(p=>p.update());
  objects=objects.filter(o=>!o.dead);
  particles=particles.filter(p=>p.life>0&&p.y<canvas.height);
  objects.forEach(o=>o.draw());
  particles.forEach(p=>p.draw());
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
